<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Ichiban Portfolio Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
  <header class="bg-gradient-to-r from-indigo-600 to-blue-500 shadow-lg py-8 mb-8">
    <div class="container mx-auto px-4">
      <h1 class="text-4xl font-extrabold text-white tracking-tight drop-shadow-lg text-center">Ichiban Portfolio Tracker</h1>
      <p class="text-lg text-indigo-100 text-center mt-2">Track your investments with style and ease</p>
    </div>
    <style>
      .news-item {
        margin-bottom: 1.5rem;
        padding: 1rem;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #f9f9f9;
      }
      .news-item h3 {
        margin: 0;
        font-size: 1.2rem;
      }
      .news-item h3 a {
        color: #007bff;
        text-decoration: none;
      }
      .news-item h3 a:hover {
        text-decoration: underline;
      }
      .news-item p {
        margin: 0.5rem 0 0;
        color: #555;
      }
    </style>
  </header>

  <div class="flex justify-center items-center">
    <div class="bg-white rounded-xl shadow-xl p-8 w-full max-w-lg">
      <h2 class="text-2xl font-bold text-indigo-700 mb-6 text-center">Add New Transaction</h2>
      <form action="/" method="post" class="space-y-6">
        <div>
          <label for="date" class="block text-sm font-medium text-gray-700">Purchase Date</label>
          <input type="date" id="date" name="date" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
        </div>
        <div>
          <label for="assetSymbol" class="block text-sm font-medium text-gray-700">Stock Symbol</label>
          <input type="text" id="assetSymbol" name="assetSymbol" maxlength="20" required placeholder="e.g. AAPL" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
        </div>
        <div>
          <label for="quantity" class="block text-sm font-medium text-gray-700">Quantity</label>
          <input type="number" id="quantity" name="quantity" step="0.01" min="0" required placeholder="e.g. 10" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" />
        </div>
        <!-- Hidden/default fields -->
        <input type="hidden" name="transactionType" value="BUY">
        <input type="hidden" name="assetType" value="STOCK">
        <input type="hidden" name="currency" value="USD">
        <input type="hidden" name="exchange" value="NASDAQ">
        <input type="hidden" name="assetName" value="">
        <input type="hidden" name="pricePerUnit" value="">
        <input type="hidden" name="totalAmount" value="">
        <div class="flex justify-center">
          <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-6 rounded-lg shadow transition duration-200">Submit</button>
        </div>
      </form>
    </div>
  </div>


<!-- Table -->
<div class="container mx-auto px-4 py-8">
  <h2 class="text-2xl font-bold mb-4">Transactions</h2>
  <div class="overflow-x-auto rounded-lg shadow">
    <table class="min-w-full bg-white border border-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-4 py-2 text-left">ID</th>
          <th class="px-4 py-2 text-left">Type</th>
          <th class="px-4 py-2 text-left">Symbol</th>
          <th class="px-4 py-2 text-left">Name</th>
          <th class="px-4 py-2 text-left">Asset Type</th>
          <th class="px-4 py-2 text-right">Quantity</th>
          <th class="px-4 py-2 text-right">Price/Unit</th>
          <th class="px-4 py-2 text-right">Total</th>
          <th class="px-4 py-2 text-left">Currency</th>
          <th class="px-4 py-2 text-left">Exchange</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="transaction : ${transactions}" class="border-t hover:bg-gray-50">
          <td class="px-4 py-2" th:text="${transaction.transactionId}">ID</td>
          <td class="px-4 py-2" th:text="${transaction.transactionType}">Type</td>
          <td class="px-4 py-2" th:text="${transaction.assetSymbol}">Symbol</td>
          <td class="px-4 py-2" th:text="${transaction.assetName}">Name</td>
          <td class="px-4 py-2" th:text="${transaction.assetType}">Asset Type</td>
          <td class="px-4 py-2 text-right" th:text="${transaction.quantity}">Qty</td>
          <td class="px-4 py-2 text-right" th:text="${transaction.pricePerUnit}">Price/Unit</td>
          <td class="px-4 py-2 text-right" th:text="${transaction.totalAmount}">Total</td>
          <td class="px-4 py-2" th:text="${transaction.currency}">Currency</td>
          <td class="px-4 py-2" th:text="${transaction.exchange}">Exchange</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<h1>Portfolio Holdings</h1>
    <table>
        <thead>
            <tr>
                <th>Asset Symbol</th>
                <th>Asset Name</th>
                <th>Total Quantity</th>
                <th>Average Price</th>
                <th>Sell</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="holding : ${portfolioHoldings}">
                <td th:text="${holding.assetSymbol}"></td>
                <td th:text="${holding.assetName}"></td>
                <td th:text="${holding.totalQuantity}"></td>
                <td th:text="${holding.averagePrice}"></td>
                <td>
                    <form action="/" method="post" class="inline">
                        <input type="hidden" name="assetSymbol" th:value="${holding.assetSymbol}" />
                        <input type="number" name="quantity" step="0.01" min="0" th:max="${holding.totalQuantity}" required placeholder="Quantity to sell" class="border rounded px-2 py-1" />

                        <input type="hidden" name="transactionType" value="SELL">
                        <input type="hidden" name="assetType" value="STOCK">
                        <input type="hidden" name="currency" value="USD">
                        <input type="hidden" name="exchange" value="NASDAQ">
                        <input type="hidden" name="assetName" value="">

                        <button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-1 px-4 rounded-lg shadow transition duration-200">Sell</button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
<h2>Total Portfolio Value: $<span th:text="${totalValue}">0.00</span></h2>

<style>
    #rss-feed-list a {
      color: #007bff;
      text-decoration: none;
    }

    #rss-feed-list a:hover {
      text-decoration: underline;
    }
  </style>


    <div id="rss-feed" class="bg-white rounded-xl shadow-xl p-4 mt-8">
      <h2 class="text-2xl font-bold text-indigo-700 mb-4">Latest financial news</h2>
      <ul id="rss-feed-list" class="space-y-4">
        <!-- News links will be dynamically inserted here -->
      </ul>
    </div>
    
    <script src="/js/rss-feed.js"></script>
</body>
</html>